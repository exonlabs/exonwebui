/*
  :copyright: 2020, ExonLabs. All rights reserved.
  :license: BSD, see LICENSE for more details.
*/
var WebUI=function(c,s){return s.format_url=function(o){return"/"+o.replace(/^[\/#]/,"")},s.doctitle={base:document.title,update:function(o){void 0!==o&&0<o.length&&(o=o[0].toUpperCase()+o.slice(1),document.title=o+" | "+s.doctitle.base)},reset:function(){document.title=s.doctitle.base}},s.pagelock={show:function(o,e){s.pagelock.hide(),c("body").append('<div id="_UiPageLock" class="container-fluid overflow-auto scroll page-lock '+(e||"")+'">'+(o||"")+"</div>")},loading:function(o){return s.pagelock.show('<div class="row"><div class="col cancel"><a id="_UiPageLock_btnCancel"><i class="fas fa-times"></i></a></div></div>'+(o||""),"page-loading"),c("#_UiPageLock_btnCancel").on("click",function(){s.pagelock.hide()}),c("#_UiPageLock_btnCancel")},progress:function(o){if(!o)return s.pagelock.loading('<div class="row h-100 align-items-center justify-content-center"><div class="col-5"><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated"></div></div></div></div>');c("#_UiPageLock .progress-bar").css("width",o+"%")},modal:function(o,e,t,i){s.pagelock.show('<div class="modal-dialog modal-dialog-centered '+(i||"")+'"><div class="modal-content"><div class="modal-header pt-2 pb-1">'+(o||"")+'<button class="close" onclick="WebUI.pagelock.hide()">Ã—</button></div><div class="modal-body scroll">'+(e||"")+(t?'</div><div class="modal-footer p-1">'+t+"</div></div></div>":""))},hide:function(){c("#_UiPageLock").length&&c("#_UiPageLock").remove()}},s.notify={stack:{dir1:"down",dir2:"left",push:"top",firstpos1:14,firstpos2:10,spacing1:7,spacing2:7},clear:PNotify.removeAll,show:function(o,e,t){t&&PNotify.removeAll(),window.innerWidth<576?(s.notify.stack.firstpos1=0,s.notify.stack.firstpos2=0):(s.notify.stack.firstpos1=14,s.notify.stack.firstpos2=10),"rtl"==c("html").attr("dir")||"rtl"==c("body").attr("dir")?s.notify.stack.dir2="right":s.notify.stack.dir2="left";var i={styling:"fontawesome",icon:!1,animate_speed:"fast",buttons:{sticker:!1,closer:!0},addclass:"stack-custom",stack:s.notify.stack};"error"==o?(i.type="error",i.text='<i class="fas fa-ta fa-exclamation-circle"></i> '+e):"warn"==o?(i.type="notice",i.text='<i class="fas fa-ta fa-exclamation-circle"></i> '+e):"success"==o?(i.type="success",i.text='<i class="fas fa-ta fa-check-circle"></i> '+e):(i.type="info",i.text='<i class="fas fa-ta fa-info-circle"></i> '+e);var n=new PNotify(i);n.get().click(function(){n.remove()})},error:function(o,e){s.notify.show("error",o,e)},warn:function(o,e){s.notify.show("warn",o,e)},info:function(o,e){s.notify.show("info",o,e)},success:function(o,e){s.notify.show("success",o,e)},load:function(o){for(var e=0;e<o.length;e++)s.notify.show(o[e][0],o[e][1])}},s.scrolltop=function(o){c("body").animate({scrollTop:0},o||300)},s.redirect=function(o,e){void 0!==o&&0<o.length&&("#"==o[0]?o==window.location.hash?c(window).trigger("hashchange"):window.location.hash=o:e?window.open(o):o==window.location?location.reload():window.location=o)},s.request=function(o,e,t,i,n,r){return c.ajax({url:s.format_url(e),type:o,data:t||{},success:function(o,e,t){"function"==typeof i?i(o):(o.notifications&&s.notify.load(o.notifications),o.redirect&&s.redirect(o.redirect,o.blank))},error:function(o,e,t){"abort"==t?t="request cancelled":o.status?t||(t="request failed"):t="service unavailable","function"==typeof n?n(c.i18n._(t)):s.notify.error(c.i18n._(t))},complete:function(o,e){"function"==typeof r&&r()}})},s.loader={req_xhr:null,lock_timer:null,progress_timer:null,progress_xhr:null,load:function(o,e,t,i,n,r,c){s.loader.cancel(),s.loader.lock_timer=setTimeout(function(){s.pagelock.loading().off("click").on("click",function(o){s.loader.cancel()})},c||500),s.loader.req_xhr=s.request(o,e,t,i,n,function(){s.loader.reset(),s.pagelock.hide(),"function"==typeof r&&r()})},progress:function(o,e,t,i,n,r,c,a){s.loader.cancel(),s.loader.lock_timer=setTimeout(function(){s.pagelock.progress().off("click").on("click",function(o){s.loader.cancel()}),s.loader.progress_timer=setInterval(function(){null===s.loader.progress_xhr&&(s.loader.progress_xhr=s.request(o,e,{_csrf_token:Cookies.get("_csrf_token"),get_progress:1},function(o){s.pagelock.progress(o.payload)},function(o){},function(){s.loader.progress_xhr=null}))},a||5e3)},c||500),s.loader.req_xhr=s.request(o,e,t,i,n,function(){s.loader.reset(),s.pagelock.progress(100),setTimeout(function(){s.pagelock.hide(),"function"==typeof r&&r()},400)})},cancel:function(){s.loader.req_xhr&&s.loader.req_xhr.abort()},reset:function(){s.loader.lock_timer&&clearTimeout(s.loader.lock_timer),s.loader.progress_timer&&clearTimeout(s.loader.progress_timer),s.loader.req_xhr=null,s.loader.lock_timer=null,s.loader.progress_timer=null}},s.init=function(){var o=c("html").attr("lang");o&&"undefined"!=typeof webui_i18n&&c.i18n.load(webui_i18n,o)},s}(jQuery,WebUI||{});