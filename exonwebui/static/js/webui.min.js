/*
  :copyright: 2020, ExonLabs. All rights reserved.
  :license: BSD, see LICENSE for more details.
*/
var WebUI=function(a,s){return s.format_url=function(e){return"/"+e.replace(/^[\/#]/,"")},s.doctitle={base:document.title,update:function(e){void 0!==e&&0<e.length&&(e=e[0].toUpperCase()+e.slice(1),document.title=e+" | "+s.doctitle.base)},reset:function(){document.title=s.doctitle.base}},s.pagelock={show:function(){s.pagelock.hide(),a("body").append('<div id="_UiPageLock" class="page-lock"></div>')},loading:function(){return s.pagelock.hide(),a("body").append('<div id="_UiPageLock" class="container-fluid page-lock page-loading"><div class="row"><div class="col cancel"><a id="_UiPageLock_btnCancel"><i class="fas fa-times"></i></a></div></div></div>'),a("#_UiPageLock_btnCancel")},progress:function(){var e=s.pagelock.loading();return a("#_UiPageLock").append('<div class="row h-100 align-items-center justify-content-center"><div class="col-5"><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated"></div></div></div></div>'),e},progress_update:function(e){a("#_UiPageLock .progress-bar").css("width",e+"%")},hide:function(){a("#_UiPageLock").length&&a("#_UiPageLock").remove()}},s.notify={stack:{dir1:"down",dir2:"left",push:"top",firstpos1:14,firstpos2:10,spacing1:7,spacing2:7},clear:PNotify.removeAll,show:function(e,o,t){t&&PNotify.removeAll(),window.innerWidth<576?(s.notify.stack.firstpos1=0,s.notify.stack.firstpos2=0):(s.notify.stack.firstpos1=14,s.notify.stack.firstpos2=10),"rtl"==a("html").attr("dir")||"rtl"==a("body").attr("dir")?s.notify.stack.dir2="right":s.notify.stack.dir2="left";var i={styling:"fontawesome",icon:!1,animate_speed:"fast",buttons:{sticker:!1,closer:!0},addclass:"stack-custom",stack:s.notify.stack};"error"==e?(i.type="error",i.text='<i class="fas fa-ta fa-exclamation-circle"></i> '+o):"warn"==e?(i.type="notice",i.text='<i class="fas fa-ta fa-exclamation-circle"></i> '+o):"success"==e?(i.type="success",i.text='<i class="fas fa-ta fa-check-circle"></i> '+o):(i.type="info",i.text='<i class="fas fa-ta fa-info-circle"></i> '+o);var n=new PNotify(i);n.get().click(function(){n.remove()})},error:function(e,o){s.notify.show("error",e,o)},warn:function(e,o){s.notify.show("warn",e,o)},info:function(e,o){s.notify.show("info",e,o)},success:function(e,o){s.notify.show("success",e,o)},load:function(e){for(var o=0;o<e.length;o++)s.notify.show(e[o][0],e[o][1])}},s.redirect=function(e,o){void 0!==e&&0<e.length&&("#"==e[0]?e==window.location.hash?a(window).trigger("hashchange"):window.location.hash=e:o?window.open(e):e==window.location?location.reload():window.location=e)},s.request=function(e,o,t,i,n,r){return a.ajax({url:s.format_url(o),type:e,data:t||{},success:function(e,o,t){"function"==typeof i?i(e):(e.notifications&&s.notify.load(e.notifications),e.redirect&&s.redirect(e.redirect,e.blank))},error:function(e,o,t){"abort"==t?t="request cancelled":e.status?t||(t="request failed"):t="service unavailable","function"==typeof n?n(a.i18n._(t)):s.notify.error(a.i18n._(t))},complete:function(e,o){"function"==typeof r&&r()}})},s.loader={req_xhr:null,lock_timer:null,progress_timer:null,load:function(e,o,t,i,n,r,a){s.loader.cancel(),s.loader.lock_timer=setTimeout(function(){s.pagelock.loading().bind("click",function(e){s.loader.cancel()})},a||500),s.loader.req_xhr=s.request(e,o,t,i,n,function(){s.loader.reset(),s.pagelock.hide(),"function"==typeof r&&r()})},progress:function(e,o,t,i,n,r,a,c){s.loader.cancel(),s.loader.lock_timer=setTimeout(function(){s.pagelock.progress().bind("click",function(e){s.loader.cancel()}),s.loader.progress_timer=setInterval(function(){s.request(e,o,{_csrf_token:Cookies.get("_csrf_token"),get_progress:1},function(e){s.pagelock.progress_update(e.payload)},function(e){})},c||5e3)},a||500),s.loader.req_xhr=s.request(e,o,t,i,n,function(){s.loader.reset(),s.pagelock.progress_update(100),setTimeout(function(){s.pagelock.hide(),"function"==typeof r&&r()},400)})},cancel:function(){s.loader.req_xhr&&s.loader.req_xhr.abort()},reset:function(){s.loader.lock_timer&&clearTimeout(s.loader.lock_timer),s.loader.progress_timer&&clearTimeout(s.loader.progress_timer),s.loader.req_xhr=null,s.loader.lock_timer=null,s.loader.progress_timer=null}},s.init=function(){var e=a("html").attr("lang");e&&"undefined"!=typeof webui_i18n&&a.i18n.load(webui_i18n,e)},s}(jQuery,WebUI||{});